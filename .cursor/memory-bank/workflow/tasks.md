# Tasks

**Emoji Legend for Tasks:**
*   ⚪️ TODO
*   🟡 IN_PROGRESS
*   🟢 DONE
*   🔴 BLOCKED
*   🔵 REVIEW

---

🟢 **1. Refactor Commit Message Generation**
    *   **Description**: Modify all rules that use the `mcp_MyMCP_commit` tool to ensure the `description` field is highly verbose, follows a new standardized markdown format, and includes a "Conclusion" section. Define this new standard format within the `context-update.mdc` rule.
    *   **Impacted Rules/Files**:
        *   `context-update.mdc` (define and use new format)
        *   `experience-execution.mdc` (use new format)
        *   `fix.mdc` (use new format)
    *   **Validation**: Commit messages generated by the agent are detailed, adhere to the new markdown structure, and include a comprehensive conclusion. The `context-update.mdc` rule clearly defines this format.

🟡 **2. Update Memory Bank File Formats & Integrate Templates**
    *   **Description**: Remove section titles from `userbrief.md`, `tasks.md`, and `tests.md`. Implement emoji-based status systems for them. Define these new formats directly within the primary rules that manage these files, and delete the old template files from `.cursor/rules/templates/`. Also, consider if context files (`projectBrief.md`, `activeContext.md`, `techContext.md`) should also have sections removed and their structure defined in rules.
    *   **Sub-Tasks**:
        *   🟢 **2.1 `userbrief.md` Refactor**:
            *   **Action**: Modify `consolidate-repo.mdc` to handle `userbrief.md` without section titles, using only emojis (e.g., 🆕 for new, ⏳ for processing, 📌 for precision, 🗄️ for archived) at the start of lines to denote status. Integrate the content/guidance from `userbrief-template.mdc` into `consolidate-repo.mdc`.
            *   **Impacted Rules/Files**: `consolidate-repo.mdc`, `userbrief-template.mdc` (for deletion).
            *   **Validation**: `consolidate-repo.mdc` correctly processes and updates `userbrief.md` using the new emoji-only format. `userbrief-template.mdc` is deleted.
        *   🟡 **2.2 `tasks.md` Refactor**:
            *   **Action**: Modify `task-decomposition.mdc` (and potentially `context-update.mdc` if it modifies tasks status) to handle `tasks.md` without section titles, using an emoji system (⚪️ TODO, 🟡 IN_PROGRESS, 🟢 DONE, 🔴 BLOCKED, 🔵 REVIEW) at the start of task lines. Define this format and emoji legend within `task-decomposition.mdc`. Integrate content/guidance from `task-template.mdc`.
            *   **Impacted Rules/Files**: `task-decomposition.mdc`, `context-update.mdc`, `task-template.mdc` (for deletion).
            *   **Validation**: `tasks.md` uses the new emoji-based format, and rules correctly interact with it. `task-template.mdc` is deleted.
        *   ⚪️ **2.3 `tests.md` Refactor**:
            *   **Action**: Modify `test-execution.mdc` (and `fix.mdc` if it reads/updates `tests.md`) to handle `tests.md` without section titles. Implement the new format: line 1 `✅{nbr_success} ❌{nbr_fails} ℹ️{nbr_skip}`, followed by a list of only failing/skipped tests with details: `- ❌ Test Name: Description - Progress notes`. Define this format within `test-execution.mdc`. Integrate content/guidance from `tests-template.mdc`.
            *   **Impacted Rules/Files**: `test-execution.mdc`, `fix.mdc`, `tests-template.mdc` (for deletion).
            *   **Validation**: `tests.md` follows the new summary header and failing-tests-only list format. Rules interact correctly. `tests-template.mdc` is deleted.
        *   ⚪️ **2.4 Context Files (`projectBrief.md`, `activeContext.md`, `techContext.md`) Refactor**:
            *   **Action**: Modify `context-loading.mdc` and `context-update.mdc` to define the structure of these files directly within the rules, removing reliance on section titles if appropriate, or ensuring the rules clearly state the expected (potentially section-less) structure. Integrate content/guidance from `projectBrief-template.mdc`, `activeContext-template.mdc`, `techContext-template.mdc`.
            *   **Impacted Rules/Files**: `context-loading.mdc`, `context-update.mdc`, `projectBrief-template.mdc`, `activeContext-template.mdc`, `techContext-template.mdc` (for deletion).
            *   **Validation**: Context files have their structure/format defined within the rules. Templates are deleted.
        *   ⚪️ **2.5 Delete Template Files**:
            *   **Action**: Delete all files from the `.cursor/rules/templates/` directory.
            *   **Impacted Files/Directory**: All files in `.cursor/rules/templates/`.
            *   **Validation**: The `.cursor/rules/templates/` directory is empty or deleted.
    *   **Validation (Overall for Task 2)**: All specified memory bank files use their new formats. All rules interacting with them are updated. All template files are deleted, and their essential formatting guidance is now part of the relevant operational rules.

⚪️ **3. Update General Rules for Consistency**
    *   **Description**: Review all other relevant workflow rules to ensure they are compatible with the new file formats (e.g., rules that might read these files for context even if they don't primarily manage them). For example, `system.mdc` itself refers to file structures; ensure it's still accurate or update it.
    *   **Impacted Rules/Files**: Potentially any rule, including `system.mdc`.
    *   **Validation**: Workflow remains coherent and functional after all changes.

# DONE

3.  **Feature: Ajout de l'outil de capture d'écran web**
    *   [x] **3.1 Implémentation de l'outil `take_webpage_screenshot`**
        *   **Description**: Ajout d'un nouvel outil au serveur MyMCP pour prendre une capture d'écran complète d'une page web via son URL et la retourner en base64.
        *   **Impacted Files/Components**:
            *   `.cursor/mcp/mcp-commit-server/package.json` (ajout de `puppeteer`)
            *   `.cursor/mcp/mcp-commit-server/server.js` (enregistrement de l'outil `take_webpage_screenshot`)
            *   `.cursor/mcp/mcp-commit-server/mcp_tools/webpage_screenshot.js` (logique de l'outil)
        *   **Validation**: L'outil a été testé manuellement avec succès avec l'URL `https://www.webpagetest.org/about` et a retourné une confirmation de génération d'image. Le problème de crash serveur initial a été résolu.

2.  **Enhance MCP Server Testing**
    *   [x] **2.1 Create Python Helper Script for Interruption Test**
        *   **Description**: Create a simple Python script (e.g., `temp_python_script.py` at the project root or in `tests/mcp_server_tests/helper_scripts/`) that runs for a noticeable duration (e.g., sleeps, writes to a file periodically) and can indicate whether it terminated gracefully or was killed.
        *   **Impacted Files/Components**: `tests/mcp_server_tests/helper_scripts/temp_python_script.py` (New file).
        *   **Dependencies**: Task 1.1 (for location).
        *   **Validation**: Python script is created and functions as expected when run manually.
    *   [x] **2.2 Implement Python Script Execution/Interruption Test**
        *   **Description**: Create a new test script (e.g., `tests/mcp_server_tests/test_python_interrupt.js`) that uses the MCP server's `execute_command` to run the Python helper script and `stop_terminal_command` to terminate it. The test should verify that the Python script (and any child processes, if applicable) is properly terminated by `tree-kill`.
        *   **Impacted Files/Components**: `tests/mcp_server_tests/test_python_interrupt.js` (New file).
        *   **Dependencies**: Task 1.4 (for SDK setup), Task 2.1.
        *   **Validation**: The new test script successfully executes the Python script, stops it, and verifies termination of the entire process tree.
    *   [x] **2.3 Test Long Timeout Behavior (Valid Timeout)**
        *   **Description**: Create or modify an existing test to use a *valid* long timeout (e.g., 20-30 seconds, less than 300s) with a long-running command (like `sleep 25` or the `persistent_child.sh`). Verify that `execute_command` initially returns a 'Running' status, and the process can be subsequently queried or stopped. (The existing `test_execute_command_timeout_rejection.js` tests *invalid* timeouts > 300s).
        *   **Impacted Files/Components**: `tests/mcp_server_tests/test_execute_command_long_timeout.js` (New or modified existing test).
        *   **Dependencies**: Task 1.4.
        *   **Validation**: Test confirms `execute_command` handles valid long timeouts correctly, allowing for asynchronous operation and status checks/stops.

1.  **Refactor Test File Locations**
    *   [x] **1.1 Create New Test Directory Structure**
        *   **Description**: Create a new directory `tests/mcp_server_tests/` and a subdirectory `tests/mcp_server_tests/helper_scripts/`